{"ast":null,"code":"import _defineProperty from\"/home/coder-kabir/Documents/GitHub/Vemshala/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/coder-kabir/Documents/GitHub/Vemshala/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/coder-kabir/Documents/GitHub/Vemshala/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,Drawer,message,Menu,Dropdown,Input,Form,Divider}from\"antd\";import{Link,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";/* CUSTOM COMPONENT */import{GlobleBox,WrapperSm,BlackBtn}from\"../../component/Xcomponent\";import CheckoutStep from\"../../component/CheckoutStep/CheckoutStep\";import CheckoutHeader from\"../../component/CheckoutHeader/CheckoutHeader\";import{Left,Right}from\"./LoginStyle\";import GoogleLogin from\"react-google-login\";import GoogleButton from'react-google-button';/* actions */import{toggleSignupModal as _toggleSignupModal,setUserLoggedIn as _setUserLoggedIn,setCustomerData as _setCustomerData}from\"../../action/generalAction\";import{createCustomer as _createCustomer,createCustomerReset as _createCustomerReset}from\"../../action/createCustomerAction\";import{login as _login,loginReset as _loginReset}from\"../../action/loginAction\";/* other */import{setToken,setCustomer,getCartId}from\"../../utils\";var Login=function Login(props){/* variable & state */var toggleSignupModal=props.toggleSignupModal,setUserLoggedIn=props.setUserLoggedIn,setCustomerData=props.setCustomerData,login=props.login,loginReset=props.loginReset,loginState=props.loginState,createCustomer=props.createCustomer,createCustomerReset=props.createCustomerReset,createCustomerState=props.createCustomerState;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([false,\"\"]),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];/* callback */useEffect(function(){if(loginState.apiState===\"error\"){message.error(\"Something went wrong. Please try later\");loginReset();}if(loginState.apiState===\"success\"){message.success(loginState.message);setToken(loginState.token);setUserLoggedIn();setCustomer(loginState.customer);setCustomerData({customer:loginState.customer});setRedirect([true,'/checkout/billing']);loginReset();}},[loginState]);useEffect(function(){if(createCustomerState.apiState===\"error\"){// message.error(createCustomerState.message);\n}if(createCustomerState.apiState===\"success\"){if(createCustomerState.customer.signup_method==\"website\"){toggleSignupModal();}if(createCustomerState.customer.signup_method!=\"website\"){message.success(createCustomerState.message);}setToken(createCustomerState.token);setUserLoggedIn();setCustomer(createCustomerState.customer);setCustomerData({customer:createCustomerState.customer});createCustomerReset();}},[createCustomerState]);/* function */var handleInputChange=function handleInputChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(){login(_objectSpread({cart_id:getCartId()},formData));};var responseGoogle=function responseGoogle(response){if(response.type===\"error\"){return false;}console.log(\"response:\",response);createCustomer({signup_method:\"google\",name:response.profileObj.name,email:response.profileObj.email,id_token:response.tokenObj.id_token});};return/*#__PURE__*/React.createElement(React.Fragment,null,redirect[0]&&/*#__PURE__*/React.createElement(Redirect,{to:redirect[1]}),/*#__PURE__*/React.createElement(GlobleBox,null,/*#__PURE__*/React.createElement(WrapperSm,null,/*#__PURE__*/React.createElement(CheckoutStep,{active:0}),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\",flexFlow:\"wrap\",background:\"white\",margin:16}},/*#__PURE__*/React.createElement(Left,null,/*#__PURE__*/React.createElement(Form,{layout:\"vertical\",onFinish:handleSubmit},/*#__PURE__*/React.createElement(Form.Item,{name:\"email\",label:\"Email\",rules:[{required:true,message:'Required'},{type:'email',message:'Email is not valid'}]},/*#__PURE__*/React.createElement(Input,{name:\"email\",placeholder:\"Email\",onChange:handleInputChange})),/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",label:\"Password\",rules:[{required:true,message:'Required'}]},/*#__PURE__*/React.createElement(Input.Password,{name:\"password\",placeholder:\"Password\",onChange:handleInputChange})),/*#__PURE__*/React.createElement(Button,{type:\"primary\",block:true,size:\"large\",htmlType:\"submit\",loading:loginState.apiState===\"loading\"},\"LOGIN\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\"}},/*#__PURE__*/React.createElement(Link,{to:\"/forgot-password\"},\"Forgot Password?\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(GoogleLogin,{clientId:\"15117413891-dgacpafu1fiicn3tqkr9jqv6uch2q3sp.apps.googleusercontent.com\",buttonText:\"Login\",onSuccess:responseGoogle,onFailure:responseGoogle,cookiePolicy:\"single_host_origin\",render:function render(renderProps){return/*#__PURE__*/React.createElement(GoogleButton,{style:{width:\"100%\"},onClick:renderProps.onClick,disabled:renderProps.disabled},\"Sign in with Google\");}}),/*#__PURE__*/React.createElement(Link,{to:\"/checkout/billing\"},/*#__PURE__*/React.createElement(Button,{block:true,size:\"large\",style:{marginTop:16}},\"Checkout As Guest\"))),/*#__PURE__*/React.createElement(Divider,{plain:true},\"OR\"),/*#__PURE__*/React.createElement(Button,{block:true,size:\"large\",onClick:function onClick(){return toggleSignupModal();}},\"Create an Account\")),/*#__PURE__*/React.createElement(Right,null,/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:8}},/*#__PURE__*/React.createElement(\"p\",{style:{fontSize:14}},\"Thanks to your Piky account, you will be able to:\"),/*#__PURE__*/React.createElement(\"ul\",{style:{fontSize:14}},/*#__PURE__*/React.createElement(\"li\",null,\"Access your shopping cart\"),/*#__PURE__*/React.createElement(\"li\",null,\"Save your billing and delivery information to order faster\"),/*#__PURE__*/React.createElement(\"li\",null,\"Manage your address book\"),/*#__PURE__*/React.createElement(\"li\",null,\"Access all your orders and download the related invoices\"),/*#__PURE__*/React.createElement(\"li\",null,\"Manage your newsletter subscription\"),/*#__PURE__*/React.createElement(\"li\",null,\"Update your personal data\"))),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",marginTop:32,fontSize:14}},/*#__PURE__*/React.createElement(\"h3\",{style:{alignSelf:\"center\"}},\"HERE TO HELP\"),/*#__PURE__*/React.createElement(\"span\",null,\"Have a question? You may find an answer in our FAQs.\"),/*#__PURE__*/React.createElement(\"span\",null,\"But you can also contact us:\"),/*#__PURE__*/React.createElement(\"h3\",{style:{marginTop:12}},\"Customer Service\"),/*#__PURE__*/React.createElement(\"span\",null,\"Call 0000-000-000\"),/*#__PURE__*/React.createElement(\"span\",null,\"Monday through Friday: 9am - 6pm ET\"),/*#__PURE__*/React.createElement(\"span\",null,\"Saturday: 10am - 6pm ET\"),/*#__PURE__*/React.createElement(\"span\",null,\"Send us an email\")))))));};var mapStateToProps=function mapStateToProps(state){return{generalState:state.general,loginState:state.login,createCustomerState:state.createCustomer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{toggleSignupModal:function toggleSignupModal(){return dispatch(_toggleSignupModal());},setUserLoggedIn:function setUserLoggedIn(){return dispatch(_setUserLoggedIn());},login:function login(params){return dispatch(_login(params));},loginReset:function loginReset(){return dispatch(_loginReset());},setCustomerData:function setCustomerData(params){return dispatch(_setCustomerData(params));},createCustomer:function createCustomer(params){return dispatch(_createCustomer(params));},createCustomerReset:function createCustomerReset(){return dispatch(_createCustomerReset());}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/coder-kabir/Documents/GitHub/Vemshala/src/page/Login/Login.js"],"names":["React","useEffect","useState","Button","Drawer","message","Menu","Dropdown","Input","Form","Divider","Link","Redirect","connect","GlobleBox","WrapperSm","BlackBtn","CheckoutStep","CheckoutHeader","Left","Right","GoogleLogin","GoogleButton","toggleSignupModal","setUserLoggedIn","setCustomerData","createCustomer","createCustomerReset","login","loginReset","setToken","setCustomer","getCartId","Login","props","loginState","createCustomerState","email","password","formData","setFormData","redirect","setRedirect","apiState","error","success","token","customer","signup_method","handleInputChange","e","target","name","value","handleSubmit","cart_id","responseGoogle","response","type","console","log","profileObj","id_token","tokenObj","display","justifyContent","flexFlow","background","margin","required","renderProps","width","onClick","disabled","marginTop","fontSize","flexDirection","alignSelf","mapStateToProps","state","generalState","general","mapDispatchToProps","dispatch","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Button, Drawer, message, Menu, Dropdown, Input, Form, Divider } from \"antd\"\nimport { Link, Redirect } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\n\n/* CUSTOM COMPONENT */\nimport { GlobleBox, WrapperSm, BlackBtn } from \"../../component/Xcomponent\"\nimport CheckoutStep from \"../../component/CheckoutStep/CheckoutStep\"\nimport CheckoutHeader from \"../../component/CheckoutHeader/CheckoutHeader\"\nimport { Left, Right } from \"./LoginStyle\"\nimport GoogleLogin from \"react-google-login\";\nimport GoogleButton from 'react-google-button'\n\n/* actions */\nimport { toggleSignupModal, setUserLoggedIn, setCustomerData } from \"../../action/generalAction\"\nimport { createCustomer, createCustomerReset } from \"../../action/createCustomerAction\"\nimport { login, loginReset } from \"../../action/loginAction\"\n\n/* other */\nimport { setToken, setCustomer, getCartId } from \"../../utils\"\n\nconst Login = props => {\n    /* variable & state */\n    const {\n        toggleSignupModal, setUserLoggedIn, setCustomerData,\n        login, loginReset, loginState,\n        createCustomer, createCustomerReset, createCustomerState,\n    } = props\n    const [formData, setFormData] = useState({\n        email: \"\",\n        password: \"\"\n    })\n    const [redirect, setRedirect] = useState([false, \"\"])\n\n    /* callback */\n    useEffect(() => {\n        if (loginState.apiState === \"error\") {\n            message.error(\"Something went wrong. Please try later\");\n            loginReset()\n        }\n        if (loginState.apiState === \"success\") {\n            message.success(loginState.message);\n            setToken(loginState.token)\n            setUserLoggedIn()\n            setCustomer(loginState.customer)\n            setCustomerData({\n                customer: loginState.customer\n            })\n            setRedirect([true, '/checkout/billing'])\n            loginReset()\n        }\n    }, [loginState])\n\n    useEffect(() => {\n        if (createCustomerState.apiState === \"error\") {\n            // message.error(createCustomerState.message);\n        }\n        if (createCustomerState.apiState === \"success\") {\n            if (createCustomerState.customer.signup_method == \"website\") {\n                toggleSignupModal()\n            }\n            if (createCustomerState.customer.signup_method != \"website\") {\n                message.success(createCustomerState.message);\n            }\n            setToken(createCustomerState.token)\n            setUserLoggedIn()\n            setCustomer(createCustomerState.customer)\n            setCustomerData({\n                customer: createCustomerState.customer\n            })\n            createCustomerReset()\n\n        }\n    }, [createCustomerState])\n\n\n    /* function */\n    const handleInputChange = e => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    const handleSubmit = () => {\n        login({\n            cart_id: getCartId(),\n            ...formData\n        })\n    }\n\n    const responseGoogle = (response) => {\n        if (response.type === \"error\") {\n            return false;\n        }\n        console.log(\"response:\", response)\n        createCustomer({\n            signup_method: \"google\",\n            name: response.profileObj.name,\n            email: response.profileObj.email,\n            id_token: response.tokenObj.id_token,\n        });\n    };\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n            <GlobleBox>\n                <WrapperSm>\n                    <CheckoutStep active={0} />\n                    <div style={{ display: \"flex\", justifyContent: \"space-around\", flexFlow: \"wrap\", background: \"white\", margin: 16 }} >\n                        <Left>\n                            <Form layout=\"vertical\" onFinish={handleSubmit}>\n                                <Form.Item\n                                    name=\"email\"\n                                    label=\"Email\"\n                                    rules={[\n                                        { required: true, message: 'Required' },\n                                        { type: 'email', message: 'Email is not valid' },\n                                    ]}\n                                >\n                                    <Input name=\"email\" placeholder=\"Email\"\n                                        onChange={handleInputChange}\n                                    />\n                                </Form.Item>\n                                <Form.Item\n                                    name=\"password\"\n                                    label=\"Password\"\n                                    rules={[\n                                        { required: true, message: 'Required' },\n                                    ]}\n                                >\n                                    <Input.Password name=\"password\" placeholder=\"Password\"\n                                        onChange={handleInputChange}\n                                    />\n                                </Form.Item>\n                                <Button type=\"primary\" block size=\"large\" htmlType=\"submit\"\n                                    loading={loginState.apiState === \"loading\"}\n                                >LOGIN</Button>\n                                <div style={{ display: \"flex\", justifyContent: \"flex-end\" }} >\n                                    <Link to=\"/forgot-password\">Forgot Password?</Link>\n                                </div>\n                                <br />\n                                <GoogleLogin\n                                    clientId=\"15117413891-dgacpafu1fiicn3tqkr9jqv6uch2q3sp.apps.googleusercontent.com\"\n                                    buttonText=\"Login\"\n                                    onSuccess={responseGoogle}\n                                    onFailure={responseGoogle}\n                                    cookiePolicy={\"single_host_origin\"}\n                                    render={renderProps => (\n                                        <GoogleButton style={{ width: \"100%\" }} onClick={renderProps.onClick} disabled={renderProps.disabled}>Sign in with Google</GoogleButton>\n                                    )}\n                                />\n                                <Link to=\"/checkout/billing\"  >\n                                    <Button block size=\"large\" style={{ marginTop: 16 }} >Checkout As Guest</Button>\n                                </Link>\n\n                            </Form>\n\n                            <Divider plain>OR</Divider>\n                            <Button block size=\"large\" onClick={() => toggleSignupModal()} >Create an Account</Button>\n                        </Left>\n                        <Right>\n                            <div style={{ marginTop: 8 }} >\n                                <p style={{ fontSize: 14 }} >Thanks to your Piky account, you will be able to:</p>\n                                <ul style={{ fontSize: 14 }} >\n                                    <li>Access your shopping cart</li>\n                                    <li>Save your billing and delivery information to order faster</li>\n                                    <li>Manage your address book</li>\n                                    <li>Access all your orders and download the related invoices</li>\n                                    <li>Manage your newsletter subscription</li>\n                                    <li>Update your personal data</li>\n                                </ul>\n                            </div>\n\n                            <div style={{ display: \"flex\", flexDirection: \"column\", marginTop: 32, fontSize: 14 }} >\n                                <h3 style={{ alignSelf: \"center\" }} >HERE TO HELP</h3>\n                                <span>Have a question? You may find an answer in our FAQs.</span>\n                                <span>But you can also contact us:</span>\n                                <h3 style={{ marginTop: 12 }} >Customer Service</h3>\n                                <span>Call 0000-000-000</span>\n                                <span>Monday through Friday: 9am - 6pm ET</span>\n                                <span>Saturday: 10am - 6pm ET</span>\n                                <span>Send us an email</span>\n                            </div>\n                        </Right>\n                    </div>\n                </WrapperSm>\n            </GlobleBox>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    generalState: state.general,\n    loginState: state.login,    \n    createCustomerState: state.createCustomer,\n})\nconst mapDispatchToProps = (dispatch) => ({\n    toggleSignupModal: () => dispatch(toggleSignupModal()),\n    setUserLoggedIn: () => dispatch(setUserLoggedIn()),\n    login: (params) => dispatch(login(params)),\n    loginReset: () => dispatch(loginReset()),\n    setCustomerData: (params) => dispatch(setCustomerData(params)),    \n    createCustomer: (params) => dispatch(createCustomer(params)),\n    createCustomerReset: () => dispatch(createCustomerReset()),\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}