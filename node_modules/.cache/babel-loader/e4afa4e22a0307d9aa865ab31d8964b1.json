{"ast":null,"code":"var _jsxFileName = \"/home/coder-kabir/Documents/GitHub/Vemshala/src/page/CheckoutPayment/CheckoutPayment.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Row, Col, Radio, Divider, message } from \"antd\";\nimport axios from \"axios\";\nimport { CheckCircleFilled, ArrowLeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n/* CUSTOM COMPONENT */\n\nimport { GlobleBox, WrapperSm } from \"../../component/Xcomponent\";\nimport CheckoutStep from \"../../component/CheckoutStep/CheckoutStep\";\nimport { CartItem, PaymentBtn, ActualPrice, RegularPrice, Discount, CouponBar } from \"./CheckoutPaymentStyle\";\n/* actions */\n\nimport { getCart, getCartReset } from \"../../action/getCartAction\";\nimport { placeCodOrder, placeCodOrderReset } from \"../../action/placeCodOrderAction\";\nimport { checkCoupon, checkCouponReset } from \"../../action/checkCouponAction\";\n/* OTHERS */\n\nimport cnf from \"../../config\";\nimport { inr, getCartId, removeCartId, getCurrency, getCustomer } from \"../../utils\";\n\nconst CheckoutPayment = props => {\n  // varibales \n  const {\n    getCart,\n    getCartReset,\n    getCartState,\n    placeCodOrder,\n    placeCodOrderReset,\n    placeCodOrderState,\n    checkCoupon,\n    checkCouponReset,\n    checkCouponState\n  } = props;\n  const [redirect, setRedirect] = useState([false, '']);\n  const [paymentMode, setPaymentMode] = useState('online');\n  const [couponCode, setCouponCode] = useState(\"\");\n  /* callback */\n\n  useEffect(() => {\n    getCart({\n      cart_id: getCartId(),\n      currencyType: getCurrency()\n    });\n  }, []);\n  useEffect(() => {\n    if (placeCodOrderState.apiState === \"error\") {\n      message.error(\"Something went wrong. Please try later\");\n    }\n\n    if (placeCodOrderState.apiState === \"success\") {\n      message.success(placeCodOrderState.message);\n      removeCartId();\n      setRedirect([true, '/checkout/thanks']);\n    }\n  }, [placeCodOrderState]);\n  useEffect(() => {\n    if (checkCouponState.apiState === \"success\") {\n      // code\n      getCart({\n        cart_id: getCartId(),\n        currencyType: getCurrency()\n      });\n    }\n\n    if (checkCouponState.apiState === \"error\") {\n      message.error(\"Something went wrong. Please try later\");\n    }\n  }, [checkCouponState]);\n  /* function */\n\n  const handleRadioChange = e => {\n    setPaymentMode(e.target.value);\n  };\n\n  function loadScript(src) {\n    return new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = src;\n\n      script.onload = () => {\n        resolve(true);\n      };\n\n      script.onerror = () => {\n        resolve(false);\n      };\n\n      document.body.appendChild(script);\n    });\n  } //Coupon\n\n\n  const handleOnChange = e => {\n    setCouponCode(e.target.value);\n  };\n\n  const handleCoupon = cartValue => {\n    checkCoupon({\n      coupon_code: couponCode,\n      cart_id: getCartId(),\n      cartValue: cartValue,\n      currencyType: getCurrency()\n    });\n  }; // @coder-kabir -----------------------------------------------------------------------------------------\n\n\n  async function displayRazorpay() {\n    const razorpayResponse = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n    if (!razorpayResponse) {\n      return alert(\"Razorpay SDK failed to load. Are you online?\");\n    } // creating a new order\n\n\n    const result = await axios({\n      method: 'post',\n      url: `${cnf.api.base_url}rzorder/create`,\n      data: {\n        cart_id: getCartId(),\n        currencyType: getCurrency()\n      },\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      }\n    });\n\n    if (!result) {\n      alert(\"Server error. Are you online?\");\n      return;\n    } // Getting the order details back\n\n\n    const {\n      amount,\n      id: order_id,\n      currency\n    } = result.data.order;\n    const {\n      b_fname,\n      b_lname,\n      b_email,\n      b_phone\n    } = result.data.billingInfo;\n    const options = {\n      key: \"rzp_test_Wq2SaFiGfiKxCG\",\n      amount: amount.toString(),\n      currency: currency,\n      // currency: getCurrency(),\n      name: \"Piky\",\n      description: \"Exclusive Saree\",\n      order_id: order_id,\n      handler: async function (response) {\n        removeCartId();\n        setRedirect([true, '/checkout/thanks']);\n      },\n      prefill: {\n        name: `${b_fname} ${b_lname}`,\n        email: b_email,\n        contact: b_phone\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  }\n\n  const paymentModeHandler = event => {\n    console.clear();\n    console.clear();\n    return console.log({\n      cart_id: getCartId(),\n      currencyType: getCurrency(),\n      customer: getCustomer()\n    });\n    if (paymentMode === \"online\") return displayRazorpay();else return placeCodOrder({\n      cart_id: getCartId(),\n      currencyType: getCurrency(),\n      customer: getCustomer()\n    });\n  }; // ------------------------------------------------------------------------------------------------------\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, redirect[0] && /*#__PURE__*/React.createElement(Redirect, {\n    to: redirect[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(GlobleBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(WrapperSm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutStep, {\n    active: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, \"Payment\"), /*#__PURE__*/React.createElement(Row, {\n    gutter: \"24\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 16,\n    xl: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, getCartState.cart && getCartState.cart.items && getCartState.cart.items.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, getCartState.cart.items.map(item => /*#__PURE__*/React.createElement(CartItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 0.2,\n      padding: \"0px 4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${cnf.s3_base_url}${item.p_thumbnail}`,\n    alt: item.p_thumbnail,\n    style: {\n      width: 80,\n      heigth: 80\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 49\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: 0.8,\n      padding: \"0px 4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 49\n    }\n  }, item.p_name), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 49\n    }\n  }, item.p_is_sale_price === \"yes\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ActualPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 65\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(item.p_actual_price)), /*#__PURE__*/React.createElement(RegularPrice, {\n    style: {\n      textDecoration: \"line-through\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 65\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(item.p_regular_price)), /*#__PURE__*/React.createElement(Discount, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 65\n    }\n  }, item.p_discount, \"% OFF\")) : /*#__PURE__*/React.createElement(ActualPrice, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 61\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(item.p_actual_price))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 35\n    }\n  }, \"No product added to the cart.\"), getCartState.apiState === \"error\" && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100%\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 33\n    }\n  }, \"No product added to the cart.\")), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 24,\n    md: 8,\n    lg: 8,\n    xl: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      border: \"solid 1px rgb(0,0,0,0.1)\",\n      padding: 16,\n      borderRadius: 4,\n      background: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      borderBottom: \"solid 1px rgb(0,0,0,0.1)\",\n      marginBottom: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 37\n    }\n  }, \"Summary\")), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      color: \"rgb(0,0,0,0.7)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 37\n    }\n  }, \"SUBTOTAL\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 37\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(getCartState.cart && getCartState.cart.subTotal ? getCartState.cart.subTotal : 0))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      color: \"rgb(0,0,0,0.7)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 37\n    }\n  }, \"SHIPPING\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 37\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(getCartState.cart && getCartState.cart.shipping ? getCartState.cart.shipping : 0))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      color: \"rgb(0,0,0,0.7)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 37\n    }\n  }, \"DISCOUNT\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 37\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(getCartState.cart && getCartState.cart.discount ? getCartState.cart.discount * -1 : 0))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      color: \"rgb(0,0,0,0.9)\",\n      fontWeight: 800\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 37\n    }\n  }, \"TOTAL\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 37\n    }\n  }, getCurrency() == \"USD\" ? /*#__PURE__*/React.createElement(React.Fragment, null, \"$\") : /*#__PURE__*/React.createElement(React.Fragment, null, \"\\u20B9\"), inr(getCartState.cart && getCartState.cart.grandTotal ? getCartState.cart.grandTotal : 0))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 33\n    }\n  }, \"Apply Coupon\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(CouponBar, {\n    placeholder: \"Enter Coupon\",\n    enterButton: null,\n    size: \"middle\",\n    onChange: handleOnChange,\n    suffix: /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => handleCoupon(getCartState.cart.subTotal),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 49\n      }\n    }, \"APPLY\"),\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 33\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Radio.Group, {\n    onChange: handleRadioChange,\n    value: paymentMode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: 'online',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 41\n    }\n  }, \"Online\"), /*#__PURE__*/React.createElement(Radio, {\n    value: 'cod',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 41\n    }\n  }, \"Cash on delivery\"))), /*#__PURE__*/React.createElement(PaymentBtn, {\n    block: true,\n    type: \"primary\",\n    onClick: event => {\n      paymentModeHandler(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 33\n    }\n  }, paymentMode === \"online\" ? \"PAYMENT\" : \"PLACE ORDER\"), /*#__PURE__*/React.createElement(Link, {\n    to: `/checkout/shipping`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"default\",\n    style: {\n      height: \"40px\",\n      backgroundColor: \"#eee\",\n      width: \"100%\",\n      marginTop: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ArrowLeftOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 144\n    }\n  }), \" GO BACK\"))))))));\n};\n\nconst mapStateToProps = state => ({\n  getCartState: state.getCart,\n  placeCodOrderState: state.placeCodOrder,\n  checkCouponState: state.checkCoupon\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getCart: params => dispatch(getCart(params)),\n  getCartReset: () => dispatch(getCartReset()),\n  placeCodOrder: params => dispatch(placeCodOrder(params)),\n  placeCodOrderReset: () => dispatch(placeCodOrderReset()),\n  checkCoupon: params => dispatch(checkCoupon(params)),\n  checkCouponReset: () => dispatch(checkCouponReset())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutPayment);","map":{"version":3,"sources":["/home/coder-kabir/Documents/GitHub/Vemshala/src/page/CheckoutPayment/CheckoutPayment.js"],"names":["React","useEffect","useState","Button","Row","Col","Radio","Divider","message","axios","CheckCircleFilled","ArrowLeftOutlined","RightOutlined","Redirect","Link","connect","GlobleBox","WrapperSm","CheckoutStep","CartItem","PaymentBtn","ActualPrice","RegularPrice","Discount","CouponBar","getCart","getCartReset","placeCodOrder","placeCodOrderReset","checkCoupon","checkCouponReset","cnf","inr","getCartId","removeCartId","getCurrency","getCustomer","CheckoutPayment","props","getCartState","placeCodOrderState","checkCouponState","redirect","setRedirect","paymentMode","setPaymentMode","couponCode","setCouponCode","cart_id","currencyType","apiState","error","success","handleRadioChange","e","target","value","loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","handleOnChange","handleCoupon","cartValue","coupon_code","displayRazorpay","razorpayResponse","alert","result","method","url","api","base_url","data","headers","amount","id","order_id","currency","order","b_fname","b_lname","b_email","b_phone","billingInfo","options","key","toString","name","description","handler","response","prefill","email","contact","paymentObject","window","Razorpay","open","paymentModeHandler","event","console","clear","log","customer","cart","items","length","map","item","flex","padding","s3_base_url","p_thumbnail","width","heigth","p_name","marginTop","p_is_sale_price","p_actual_price","textDecoration","p_regular_price","p_discount","height","display","justifyContent","alignItems","border","borderRadius","background","borderBottom","marginBottom","color","subTotal","shipping","discount","fontWeight","grandTotal","backgroundColor","mapStateToProps","state","mapDispatchToProps","dispatch","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Button, Row, Col, Radio, Divider, message } from \"antd\"\nimport axios from \"axios\"\n\nimport { CheckCircleFilled, ArrowLeftOutlined, RightOutlined } from \"@ant-design/icons\"\nimport { Redirect, Link } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\n\n/* CUSTOM COMPONENT */\nimport { GlobleBox, WrapperSm } from \"../../component/Xcomponent\"\nimport CheckoutStep from \"../../component/CheckoutStep/CheckoutStep\"\nimport { CartItem, PaymentBtn, ActualPrice, RegularPrice, Discount, CouponBar } from \"./CheckoutPaymentStyle\"\n\n\n/* actions */\nimport { getCart, getCartReset } from \"../../action/getCartAction\"\nimport { placeCodOrder, placeCodOrderReset } from \"../../action/placeCodOrderAction\"\nimport { checkCoupon, checkCouponReset } from \"../../action/checkCouponAction\"\n\n/* OTHERS */\nimport cnf from \"../../config\"\nimport { inr, getCartId, removeCartId, getCurrency,getCustomer } from \"../../utils\"\n\n\nconst CheckoutPayment = props => {\n\n    // varibales \n    const {\n        getCart, getCartReset, getCartState,\n        placeCodOrder, placeCodOrderReset, placeCodOrderState,\n        checkCoupon, checkCouponReset, checkCouponState\n    } = props\n    const [redirect, setRedirect] = useState([false, ''])\n    const [paymentMode, setPaymentMode] = useState('online')\n    const [couponCode, setCouponCode] = useState(\"\")\n\n\n    /* callback */\n    useEffect(() => {\n        getCart({\n            cart_id: getCartId(),\n            currencyType: getCurrency()\n        })\n            \n    }, [])\n\n    useEffect(() => {\n        if (placeCodOrderState.apiState === \"error\") {\n            message.error(\"Something went wrong. Please try later\");\n        }\n        if (placeCodOrderState.apiState === \"success\") {\n            message.success(placeCodOrderState.message);\n            removeCartId()\n            setRedirect([true, '/checkout/thanks'])\n        }\n    }, [placeCodOrderState])\n\n    useEffect(() => {\n        if (checkCouponState.apiState === \"success\") {\n            // code\n            getCart({\n                cart_id: getCartId(),\n                currencyType: getCurrency()\n            })\n        }\n        if (checkCouponState.apiState === \"error\") {\n            message.error(\"Something went wrong. Please try later\");\n        }\n    }, [checkCouponState])\n\n    /* function */\n    const handleRadioChange = e => {\n        setPaymentMode(e.target.value);\n    };\n\n    function loadScript(src) {\n        return new Promise((resolve) => {\n            const script = document.createElement(\"script\");\n            script.src = src;\n            script.onload = () => {\n                resolve(true);\n            };\n            script.onerror = () => {\n                resolve(false);\n            };\n            document.body.appendChild(script);\n        });\n    }\n\n    //Coupon\n    const handleOnChange = (e) => {\n        setCouponCode(e.target.value)\n    }\n    const handleCoupon = (cartValue) => {\n        checkCoupon({\n            coupon_code: couponCode,\n            cart_id: getCartId(),\n            cartValue: cartValue,\n            currencyType: getCurrency()\n        })\n\n    }\n\n\n\n    // @coder-kabir -----------------------------------------------------------------------------------------\n\n        async function displayRazorpay() {\n            \n            const razorpayResponse = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n            if (!razorpayResponse) { return alert(\"Razorpay SDK failed to load. Are you online?\"); } \n        \n        // creating a new order\n        const result = await axios({\n            method: 'post',\n            url: `${cnf.api.base_url}rzorder/create`,\n            data: {\n                cart_id: getCartId(),\n                currencyType: getCurrency(), \n            },\n            headers: {\n                \"Content-type\": \"application/json; charset=UTF-8\",\n            }\n        })\n\n        if (!result) {\n            alert(\"Server error. Are you online?\");\n            return;\n        }\n\n        // Getting the order details back\n        const { amount, id: order_id, currency } = result.data.order;\n        const { b_fname, b_lname, b_email, b_phone } = result.data.billingInfo;\n        const options = {\n            key: \"rzp_test_Wq2SaFiGfiKxCG\",\n            amount: amount.toString(),\n            currency: currency,\n            // currency: getCurrency(),\n            name: \"Piky\",\n            description: \"Exclusive Saree\",\n            order_id: order_id,\n            handler: async function (response) {\n                removeCartId()\n                setRedirect([true, '/checkout/thanks'])\n            },\n            prefill: {\n                name: `${b_fname} ${b_lname}`,\n                email: b_email,\n                contact: b_phone,\n            },\n        };\n\n        const paymentObject = new window.Razorpay(options);\n        paymentObject.open();\n    }\n\n        const paymentModeHandler = (event) => {\n\n            console.clear(); console.clear();\n\n            return console.log({\n                cart_id      : getCartId(),\n                currencyType : getCurrency(),\n                customer     : getCustomer()\n            }) \n\n            if(paymentMode === \"online\") return displayRazorpay();\n\n            else return placeCodOrder({\n                cart_id      : getCartId(),\n                currencyType : getCurrency(),\n                customer     : getCustomer()\n            })\n        }\n\n    // ------------------------------------------------------------------------------------------------------\n\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n            <GlobleBox>\n                <WrapperSm>\n                    <CheckoutStep active={3} />\n                    <h1>Payment</h1>\n                    <Row gutter=\"24\">\n                        <Col xs={24} sm={24} md={16} lg={16} xl={16}>\n                            {getCartState.cart && getCartState.cart.items && getCartState.cart.items.length > 0 ?\n                                <>\n                                    {getCartState.cart.items.map(item => (\n                                        <CartItem>\n                                            <div style={{ flex: 0.2, padding: \"0px 4px\" }} >\n                                                <img\n                                                    src={`${cnf.s3_base_url}${item.p_thumbnail}`}\n                                                    alt={item.p_thumbnail}\n                                                    style={{ width: 80, heigth: 80 }}\n                                                />\n                                            </div>\n                                            <div style={{ flex: 0.8, padding: \"0px 4px\" }}>\n                                                <h3>{item.p_name}</h3>\n                                                {/* <p>Size: <span style={{ fontWeight: \"600\" }} >Small</span>, Color: <span style={{ fontWeight: \"600\" }} >Red</span> </p> */}\n\n                                                <div style={{ marginTop: 8 }} >\n                                                    {item.p_is_sale_price === \"yes\" ?\n                                                            <>\n                                                                <ActualPrice> \n                                                                    {getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(item.p_actual_price)}\n                                                                </ActualPrice>\n                                                                <RegularPrice style={{textDecoration: \"line-through\"}}>{getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(item.p_regular_price)}</RegularPrice>\n                                                                <Discount>{item.p_discount}% OFF</Discount>\n                                                            </>:\n                                                            <ActualPrice > \n                                                                {getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(item.p_actual_price)}\n                                                            </ActualPrice>\n                                                        }\n                                                </div>\n                                            </div>\n                                        </CartItem>\n                                    ))}\n                                </>\n                                : <div style={{ height: \"100%\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} >No product added to the cart.</div>\n                            }\n\n\n                            {getCartState.apiState === \"error\" &&\n                                <div style={{ height: \"100%\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }} >No product added to the cart.</div>\n                            }\n                        </Col>\n\n\n                        <Col xs={24} sm={24} md={8} lg={8} xl={8}>\n\n                            <div style={{ border: \"solid 1px rgb(0,0,0,0.1)\", padding: 16, borderRadius: 4, background: \"white\" }} >\n                                <div style={{ borderBottom: \"solid 1px rgb(0,0,0,0.1)\", marginBottom: 12 }} >\n                                    <h3>Summary</h3>\n                                </div>\n                                <p style={{ display: \"flex\", justifyContent: \"space-between\", color: \"rgb(0,0,0,0.7)\" }} >\n                                    <span>SUBTOTAL</span>\n                                    <span>{getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(getCartState.cart && getCartState.cart.subTotal ? getCartState.cart.subTotal : 0)}</span>\n                                </p>\n                                <p style={{ display: \"flex\", justifyContent: \"space-between\", color: \"rgb(0,0,0,0.7)\" }} >\n                                    <span>SHIPPING</span>\n                                    <span>{getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(getCartState.cart && getCartState.cart.shipping ? getCartState.cart.shipping : 0)}</span>\n                                </p>\n\n                                <p style={{ display: \"flex\", justifyContent: \"space-between\", color: \"rgb(0,0,0,0.7)\" }} >\n                                    <span>DISCOUNT</span>\n                                    <span>{getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(getCartState.cart && getCartState.cart.discount ? getCartState.cart.discount * -1 : 0)}</span>\n                                </p>\n                                <p style={{ display: \"flex\", justifyContent: \"space-between\", color: \"rgb(0,0,0,0.9)\", fontWeight: 800 }} >\n                                    <span>TOTAL</span>\n                                    <span>{getCurrency() == \"USD\" ? <>$</> : <>₹</>}{inr(getCartState.cart && getCartState.cart.grandTotal ? getCartState.cart.grandTotal : 0)}</span>\n                                </p>\n                                <Divider />\n                                <h3>Apply Coupon</h3>\n                                <div style={{ marginBottom: 10 }} >\n                                    <CouponBar\n                                        placeholder=\"Enter Coupon\"\n                                        enterButton={null}\n                                        size=\"middle\"\n                                        onChange={handleOnChange}\n                                        suffix={<Button type=\"primary\" onClick={() => handleCoupon(getCartState.cart.subTotal)} >APPLY</Button>}\n                                        style={{ width: \"100%\" }}\n                                    />\n                                </div>\n                                <Divider />\n                                <h3>Payment Method</h3>\n                                <div style={{ marginBottom: 10 }} >\n                                    <Radio.Group onChange={handleRadioChange} value={paymentMode}>\n                                        <Radio value={'online'}>Online</Radio>\n                                        <Radio value={'cod'}>Cash on delivery</Radio>\n                                    </Radio.Group>\n                                </div> \n\n                                <PaymentBtn block type=\"primary\" onClick={(event) => { paymentModeHandler(event) }}>\n                                    { paymentMode === \"online\" ? \"PAYMENT\" : \"PLACE ORDER\" }\n                                </PaymentBtn> \n                                <Link to={`/checkout/shipping`}  >\n                                    <Button type=\"default\" style={{ height: \"40px\", backgroundColor: \"#eee\", width:\"100%\", marginTop:\"5px\" }} ><ArrowLeftOutlined /> GO BACK</Button>\n                                 </Link>\n                            </div>\n                        </Col>\n                    </Row>\n                </WrapperSm>\n            </GlobleBox>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    getCartState: state.getCart,\n    placeCodOrderState: state.placeCodOrder,\n    checkCouponState: state.checkCoupon,\n})\nconst mapDispatchToProps = (dispatch) => ({\n    getCart: (params) => dispatch(getCart(params)),\n    getCartReset: () => dispatch(getCartReset()),\n    placeCodOrder: (params) => dispatch(placeCodOrder(params)),\n    placeCodOrderReset: () => dispatch(placeCodOrderReset()),\n    checkCoupon: (params) => dispatch(checkCoupon(params)),\n    checkCouponReset: () => dispatch(checkCouponReset()),\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutPayment)"]},"metadata":{},"sourceType":"module"}