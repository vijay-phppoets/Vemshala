{"ast":null,"code":"var _jsxFileName = \"/home/kuldeep/Git Hub/Vemshala/src/component/ProductList/ProductList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Pagination, Space, Spin } from 'antd';\nimport { connect } from \"react-redux\";\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\n/* custom components */\n\nimport { GlobleBox, Wrapper } from \"../../component/Xcomponent\";\nimport { ProductsWrapper, ProductsBox } from \"./ProductListStyle\";\nimport Product from \"../../component/Product/Product\";\nimport FilterSection from \"../../component/FilterSection/FilterSection\";\n/* actions */\n\nimport { getProductList, getProductListReset } from \"../../action/getProductListAction\";\n/* other */\n\nimport { getToken, getCurrency } from '../../utils';\n\nconst ProductList = props => {\n  /* variables */\n  const {\n    getProductList,\n    getProductListReset,\n    getProductListState\n  } = props;\n  const search = useLocation().search;\n  const page = new URLSearchParams(search).get('page');\n  const sort = new URLSearchParams(search).get('sort');\n  const filter = new URLSearchParams(search).get('filter');\n  const attr_filter = new URLSearchParams(search).get('attr_filter');\n  const [pagination, setPagination] = useState({\n    page: page ? parseInt(page) : 1,\n    records: 20\n  });\n  const [sortBy, setSortBy] = useState(sort ? sort : \"\");\n  const [redirect, setRedirect] = useState([false, \"\"]);\n  const [filter_params, set_filter_params] = useState(filter ? JSON.parse(filter) : {});\n  const [attr_filter_params, set_attr_filter_params] = useState(attr_filter ? JSON.parse(attr_filter) : {});\n  const [currencyType, setCurrencyType] = useState(\"\");\n  /* callbacks */\n\n  useEffect(() => {\n    let currency = getCurrency();\n    setCurrencyType(currency);\n\n    if (!props.forSearch) {\n      getProductList({\n        category_url_key: props.category_url_key,\n        page: pagination.page,\n        records: pagination.records,\n        sort_key: sortBy,\n        filter_params: filter_params,\n        attr_filter_params: attr_filter_params,\n        currencyType: currency\n      });\n    } else {\n      getProductList({\n        page: pagination.page,\n        records: pagination.records,\n        search_query: props.search_query,\n        filter_params: {},\n        attr_filter_params: {},\n        currencyType: currency\n      });\n    }\n  }, [pagination, sortBy, filter_params, attr_filter_params, props.search_query]);\n  useEffect(() => {\n    let url = '';\n\n    if (props.forSearch) {\n      url = `/search/${props.search_query}?page=${pagination.page}`;\n    } else {\n      url = `/shop/${props.category_url_key}?page=${pagination.page}`;\n    }\n\n    if (sortBy) url = `/shop/${props.category_url_key}?page=${pagination.page}&sort=${sortBy}`;\n    const filter_params_keys = Object.keys(filter_params);\n\n    if (filter_params_keys.length > 0) {\n      url = `${url}&filter=${JSON.stringify(filter_params)}`;\n    }\n\n    const attr_filter_params_keys = Object.keys(attr_filter_params);\n\n    if (attr_filter_params_keys.length > 0) {\n      url = `${url}&attr_filter=${JSON.stringify(attr_filter_params)}`;\n    }\n\n    setRedirect([true, url]);\n  }, [pagination, sortBy, filter_params, attr_filter_params]);\n  /* functions */\n\n  const handleSort = sort_key => {\n    setSortBy(sort_key);\n  };\n\n  const handleFilter = (filter_by, filter_value, checked) => {\n    let values = filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_filter_params({ ...filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });\n    } else {\n      valuesArr = valuesArr.filter(el => el !== filter_value);\n      if (valuesArr.length > 0) set_filter_params({ ...filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });else {\n        delete filter_params[filter_by];\n        set_filter_params({ ...filter_params\n        });\n      }\n    }\n  };\n\n  const handleAttrFilter = (filter_by, filter_value, checked) => {\n    let values = attr_filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_attr_filter_params({ ...attr_filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });\n    } else {\n      valuesArr = valuesArr.filter(el => el !== filter_value);\n      if (valuesArr.length > 0) set_attr_filter_params({ ...attr_filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });else {\n        delete attr_filter_params[filter_by];\n        set_attr_filter_params({ ...attr_filter_params\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, redirect[0] && /*#__PURE__*/React.createElement(Redirect, {\n    to: redirect[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(GlobleBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, !props.forSearch && /*#__PURE__*/React.createElement(FilterSection, {\n    handleSort: handleSort,\n    handleFilter: handleFilter,\n    handleAttrFilter: handleAttrFilter,\n    category_url_key: props.category_url_key,\n    filter_params: filter_params,\n    attr_filter_params: attr_filter_params,\n    sortBy: sortBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }), props.search_query && /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, \"Search Result: '\", props.search_query, \"'\"), getProductListState.list.length > 0 && /*#__PURE__*/React.createElement(Spin, {\n    spinning: getProductListState.apiState === \"loading\",\n    tip: \"Loading...\",\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ProductsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, getProductListState.list.map(product => /*#__PURE__*/React.createElement(ProductsBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Product, {\n    product: product,\n    hideActionBtns: props.hideActionBtns,\n    currencyType: currencyType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 41\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      marginBottom: 64\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    current: pagination.page,\n    total: getProductListState.total_records,\n    pageSize: pagination.records,\n    onChange: (page, pageSize) => setPagination({ ...pagination,\n      ['page']: page\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }))), getProductListState.apiState === \"success\" && getProductListState.list.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      minHeight: 300,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }, \"No Product Found.\"), /*#__PURE__*/React.createElement(Space, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      set_filter_params({});\n      set_attr_filter_params({});\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 33\n    }\n  }, \"Clear Filter\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 47\n    }\n  }, \"Home\")))), getProductListState.apiState === \"error\" && /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, \"Error\"))));\n};\n\nconst mapStateToProps = state => ({\n  getProductListState: state.getProductList\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getProductList: params => dispatch(getProductList(params)),\n  getProductListReset: () => dispatch(getProductListReset())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);","map":{"version":3,"sources":["/home/kuldeep/Git Hub/Vemshala/src/component/ProductList/ProductList.js"],"names":["React","useEffect","useState","Button","Pagination","Space","Spin","connect","Redirect","useLocation","Link","GlobleBox","Wrapper","ProductsWrapper","ProductsBox","Product","FilterSection","getProductList","getProductListReset","getToken","getCurrency","ProductList","props","getProductListState","search","page","URLSearchParams","get","sort","filter","attr_filter","pagination","setPagination","parseInt","records","sortBy","setSortBy","redirect","setRedirect","filter_params","set_filter_params","JSON","parse","attr_filter_params","set_attr_filter_params","currencyType","setCurrencyType","currency","forSearch","category_url_key","sort_key","search_query","url","filter_params_keys","Object","keys","length","stringify","attr_filter_params_keys","handleSort","handleFilter","filter_by","filter_value","checked","values","valuesArr","split","push","join","el","handleAttrFilter","textAlign","list","apiState","map","product","hideActionBtns","display","justifyContent","marginBottom","total_records","pageSize","flexDirection","alignItems","minHeight","mapStateToProps","state","mapDispatchToProps","dispatch","params"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Button, Pagination, Space, Spin } from 'antd';\nimport { connect } from \"react-redux\"\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\n\n/* custom components */\nimport { GlobleBox, Wrapper } from \"../../component/Xcomponent\"\nimport { ProductsWrapper, ProductsBox } from \"./ProductListStyle\"\nimport Product from \"../../component/Product/Product\"\nimport FilterSection from \"../../component/FilterSection/FilterSection\"\n\n/* actions */\nimport { getProductList, getProductListReset } from \"../../action/getProductListAction\"\n\n/* other */\nimport { getToken, getCurrency } from '../../utils'\n\nconst ProductList = props => {\n\n\n    /* variables */\n    const { getProductList, getProductListReset, getProductListState } = props\n    const search = useLocation().search;\n    const page = new URLSearchParams(search).get('page');\n    const sort = new URLSearchParams(search).get('sort');\n    const filter = new URLSearchParams(search).get('filter');\n    const attr_filter = new URLSearchParams(search).get('attr_filter');\n    const [pagination, setPagination] = useState({\n        page: page ? parseInt(page) : 1,\n        records: 20\n    })\n    const [sortBy, setSortBy] = useState(sort ? sort : \"\")\n    const [redirect, setRedirect] = useState([false, \"\"])\n    const [filter_params, set_filter_params] = useState(filter ? JSON.parse(filter) : {})\n    const [attr_filter_params, set_attr_filter_params] = useState(attr_filter ? JSON.parse(attr_filter) : {})\n    const [currencyType, setCurrencyType] = useState(\"\")\n\n\n\n    /* callbacks */\n    useEffect(() => {\n        let currency = getCurrency();\n        setCurrencyType(currency)\n        if (!props.forSearch) {\n            getProductList({\n                category_url_key: props.category_url_key,\n                page: pagination.page,\n                records: pagination.records,\n                sort_key: sortBy,\n                filter_params: filter_params,\n                attr_filter_params: attr_filter_params,\n                currencyType: currency\n            })\n        } else {\n            getProductList({\n                page: pagination.page,\n                records: pagination.records,\n                search_query: props.search_query,\n                filter_params: {},\n                attr_filter_params: {},\n                currencyType: currency\n            })\n        }\n    }, [pagination, sortBy, filter_params, attr_filter_params, props.search_query])\n\n    useEffect(() => {\n        let url = ''\n        if (props.forSearch) {\n            url = `/search/${props.search_query}?page=${pagination.page}`\n        } else {\n            url = `/shop/${props.category_url_key}?page=${pagination.page}`\n        }\n        if (sortBy) url = `/shop/${props.category_url_key}?page=${pagination.page}&sort=${sortBy}`\n\n        const filter_params_keys = Object.keys(filter_params);\n        if (filter_params_keys.length > 0) {\n            url = `${url}&filter=${JSON.stringify(filter_params)}`\n        }\n\n        const attr_filter_params_keys = Object.keys(attr_filter_params);\n        if (attr_filter_params_keys.length > 0) {\n            url = `${url}&attr_filter=${JSON.stringify(attr_filter_params)}`\n        }\n\n        setRedirect([true, url])\n    }, [pagination, sortBy, filter_params, attr_filter_params])\n\n    /* functions */\n    const handleSort = (sort_key) => {\n        setSortBy(sort_key)\n    }\n\n    const handleFilter = (filter_by, filter_value, checked) => {\n        let values = filter_params[filter_by]\n        let valuesArr = values ? values.split(\",\") : []\n\n        if (checked) {\n            valuesArr.push(filter_value)\n            set_filter_params({ ...filter_params, [filter_by]: valuesArr.join(\",\") })\n        } else {\n            valuesArr = valuesArr.filter(el => el !== filter_value);\n            if (valuesArr.length > 0) set_filter_params({ ...filter_params, [filter_by]: valuesArr.join(\",\") })\n            else {\n                delete filter_params[filter_by]\n                set_filter_params({ ...filter_params })\n            }\n        }\n    }\n\n    const handleAttrFilter = (filter_by, filter_value, checked) => {\n        let values = attr_filter_params[filter_by]\n        let valuesArr = values ? values.split(\",\") : []\n\n        if (checked) {\n            valuesArr.push(filter_value)\n            set_attr_filter_params({ ...attr_filter_params, [filter_by]: valuesArr.join(\",\") })\n        } else {\n            valuesArr = valuesArr.filter(el => el !== filter_value);\n            if (valuesArr.length > 0) set_attr_filter_params({ ...attr_filter_params, [filter_by]: valuesArr.join(\",\") })\n            else {\n                delete attr_filter_params[filter_by]\n                set_attr_filter_params({ ...attr_filter_params })\n            }\n        }\n    }\n\n\n\n    return (\n        <>\n            {redirect[0] &&\n                <Redirect to={redirect[1]} />}\n\n            <GlobleBox>\n                <Wrapper>\n                    {!props.forSearch &&\n                        <FilterSection\n                            handleSort={handleSort}\n                            handleFilter={handleFilter}\n                            handleAttrFilter={handleAttrFilter}\n                            category_url_key={props.category_url_key}\n                            filter_params={filter_params}\n                            attr_filter_params={attr_filter_params}\n                            sortBy={sortBy}\n                        />\n                    }\n                    {props.search_query &&\n                        <h2 style={{ textAlign: \"center\" }} >Search Result: '{props.search_query}'</h2>\n                    }\n                    {getProductListState.list.length > 0 &&\n                        <Spin spinning={getProductListState.apiState === \"loading\"} tip=\"Loading...\" size=\"large\">\n                            <ProductsWrapper>\n                                {getProductListState.list.map(product => (\n                                    <ProductsBox>\n                                        <Product\n                                            product={product}\n                                            hideActionBtns={props.hideActionBtns}\n                                            currencyType={currencyType}\n                                        />\n                                    </ProductsBox>\n                                ))}\n                            </ProductsWrapper>\n                            <div style={{ display: \"flex\", justifyContent: \"center\", marginBottom: 64 }} >\n                                <Pagination\n                                    current={pagination.page}\n                                    total={getProductListState.total_records}\n                                    pageSize={pagination.records}\n                                    onChange={(page, pageSize) => setPagination({ ...pagination, ['page']: page })}\n                                />\n                            </div>\n                        </Spin>\n                    }\n\n                    {(getProductListState.apiState === \"success\" && getProductListState.list.length === 0) &&\n                        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\", minHeight: 300, justifyContent: \"center\" }}>\n                            <h3>No Product Found.</h3>\n                            <Space>\n                                <Button onClick={() => {\n                                    set_filter_params({})\n                                    set_attr_filter_params({})\n                                }} >Clear Filter</Button>\n                                <Link to=\"/\" ><Button>Home</Button></Link>\n                            </Space>\n                        </div>\n                    }\n\n                    {getProductListState.apiState === \"error\" &&\n                        <h1>Error</h1>\n                    }\n\n                </Wrapper>\n            </GlobleBox>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => ({\n    getProductListState: state.getProductList,\n})\nconst mapDispatchToProps = (dispatch) => ({\n    getProductList: (params) => dispatch(getProductList(params)),\n    getProductListReset: () => dispatch(getProductListReset()),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList)"]},"metadata":{},"sourceType":"module"}