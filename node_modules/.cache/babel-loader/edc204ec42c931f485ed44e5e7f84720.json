{"ast":null,"code":"var _jsxFileName = \"/home/kuldeep/Git Hub/Vemshala/src/component/ProductList/ProductList.js\";\nimport { Button, Pagination, Space, Spin } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\n/* custom components */\n\nimport FilterSection from \"../../component/FilterSection/FilterSection\";\nimport Product from \"../../component/Product/Product\";\nimport { GlobleBox, Wrapper } from \"../../component/Xcomponent\";\nimport { ProductsBox, ProductsWrapper } from \"./ProductListStyle\";\n/* actions */\n\nimport { getProductList, getProductListReset } from \"../../action/getProductListAction\";\n/* other */\n\nimport { getCurrency } from \"../../utils\";\n\nconst ProductList = props => {\n  /* variables */\n  const {\n    getProductList,\n    getProductListReset,\n    getProductListState\n  } = props;\n  const search = useLocation().search;\n  const page = new URLSearchParams(search).get(\"page\");\n  const sort = new URLSearchParams(search).get(\"sort\");\n  const filter = new URLSearchParams(search).get(\"filter\");\n  const attr_filter = new URLSearchParams(search).get(\"attr_filter\");\n  const [pagination, setPagination] = useState({\n    page: page ? parseInt(page) : 1,\n    records: 20\n  });\n  const [sortBy, setSortBy] = useState(sort ? sort : \"\");\n  const [redirect, setRedirect] = useState([false, \"\"]);\n  const [filter_params, set_filter_params] = useState(filter ? JSON.parse(filter) : {});\n  const [attr_filter_params, set_attr_filter_params] = useState(attr_filter ? JSON.parse(attr_filter) : {});\n  const [currencyType, setCurrencyType] = useState(\"\");\n  /* callbacks */\n\n  useEffect(() => {\n    let currency = getCurrency();\n    setCurrencyType(currency);\n\n    if (!props.forSearch) {\n      getProductList({\n        category_url_key: props.category_url_key,\n        page: pagination.page,\n        records: pagination.records,\n        sort_key: sortBy,\n        filter_params: filter_params,\n        attr_filter_params: attr_filter_params,\n        currencyType: currency\n      });\n    } else {\n      getProductList({\n        page: pagination.page,\n        records: pagination.records,\n        search_query: props.search_query,\n        filter_params: {},\n        attr_filter_params: {},\n        currencyType: currency\n      });\n    }\n  }, [pagination, sortBy, filter_params, attr_filter_params, props.search_query]);\n  useEffect(() => {\n    let url = \"\";\n\n    if (props.forSearch) {\n      url = `/search/${props.search_query}?page=${pagination.page}`;\n    } else {\n      url = `/shop/${props.category_url_key}?page=${pagination.page}`;\n    }\n\n    if (sortBy) url = `/shop/${props.category_url_key}?page=${pagination.page}&sort=${sortBy}`;\n    const filter_params_keys = Object.keys(filter_params);\n\n    if (filter_params_keys.length > 0) {\n      url = `${url}&filter=${JSON.stringify(filter_params)}`;\n    }\n\n    const attr_filter_params_keys = Object.keys(attr_filter_params);\n\n    if (attr_filter_params_keys.length > 0) {\n      url = `${url}&attr_filter=${JSON.stringify(attr_filter_params)}`;\n    }\n\n    setRedirect([true, url]);\n  }, [pagination, sortBy, filter_params, attr_filter_params]);\n  /* functions */\n\n  const handleSort = sort_key => {\n    setSortBy(sort_key);\n  };\n\n  const handleFilter = (filter_by, filter_value, checked) => {\n    let values = filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_filter_params({ ...filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });\n    } else {\n      valuesArr = valuesArr.filter(el => el !== filter_value);\n      if (valuesArr.length > 0) set_filter_params({ ...filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });else {\n        delete filter_params[filter_by];\n        set_filter_params({ ...filter_params\n        });\n      }\n    }\n  };\n\n  const handleAttrFilter = (filter_by, filter_value, checked) => {\n    let values = attr_filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_attr_filter_params({ ...attr_filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });\n    } else {\n      valuesArr = valuesArr.filter(el => el !== filter_value);\n      if (valuesArr.length > 0) set_attr_filter_params({ ...attr_filter_params,\n        [filter_by]: valuesArr.join(\",\")\n      });else {\n        delete attr_filter_params[filter_by];\n        set_attr_filter_params({ ...attr_filter_params\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, redirect[0] && /*#__PURE__*/React.createElement(Redirect, {\n    to: redirect[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(GlobleBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, !props.forSearch && /*#__PURE__*/React.createElement(FilterSection, {\n    handleSort: handleSort,\n    handleFilter: handleFilter,\n    handleAttrFilter: handleAttrFilter,\n    category_url_key: props.category_url_key,\n    filter_params: filter_params,\n    attr_filter_params: attr_filter_params,\n    sortBy: sortBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }), props.search_query && /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, \"Search Result: '\", props.search_query, \"'\"), getProductListState.list.length > 0 && /*#__PURE__*/React.createElement(Spin, {\n    spinning: getProductListState.apiState === \"loading\",\n    tip: \"Loading...\",\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ProductsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, getProductListState.list.map(product => /*#__PURE__*/React.createElement(ProductsBox, {\n    className: \"desktop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Product, {\n    product: product,\n    hideActionBtns: props.hideActionBtns,\n    currencyType: currencyType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      marginBottom: 64\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    current: pagination.page,\n    total: getProductListState.total_records,\n    pageSize: pagination.records,\n    onChange: (page, pageSize) => setPagination({ ...pagination,\n      [\"page\"]: page\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }))), getProductListState.apiState === \"success\" && getProductListState.list.length === 0 && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      minHeight: 300,\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }\n  }, \"No Product Found.\"), /*#__PURE__*/React.createElement(Space, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      set_filter_params({});\n      set_attr_filter_params({});\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, \"Clear Filter\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }\n  }, \"Home\")))), getProductListState.apiState === \"error\" && /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 56\n    }\n  }, \"Error\"))));\n};\n\nconst mapStateToProps = state => ({\n  getProductListState: state.getProductList\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getProductList: params => dispatch(getProductList(params)),\n  getProductListReset: () => dispatch(getProductListReset())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);","map":{"version":3,"sources":["/home/kuldeep/Git Hub/Vemshala/src/component/ProductList/ProductList.js"],"names":["Button","Pagination","Space","Spin","React","useEffect","useState","connect","Link","Redirect","useLocation","FilterSection","Product","GlobleBox","Wrapper","ProductsBox","ProductsWrapper","getProductList","getProductListReset","getCurrency","ProductList","props","getProductListState","search","page","URLSearchParams","get","sort","filter","attr_filter","pagination","setPagination","parseInt","records","sortBy","setSortBy","redirect","setRedirect","filter_params","set_filter_params","JSON","parse","attr_filter_params","set_attr_filter_params","currencyType","setCurrencyType","currency","forSearch","category_url_key","sort_key","search_query","url","filter_params_keys","Object","keys","length","stringify","attr_filter_params_keys","handleSort","handleFilter","filter_by","filter_value","checked","values","valuesArr","split","push","join","el","handleAttrFilter","textAlign","list","apiState","map","product","hideActionBtns","display","justifyContent","marginBottom","total_records","pageSize","flexDirection","alignItems","minHeight","mapStateToProps","state","mapDispatchToProps","dispatch","params"],"mappings":";AAAA,SAASA,MAAT,EAAiBC,UAAjB,EAA6BC,KAA7B,EAAoCC,IAApC,QAAgD,MAAhD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,WAAzB,QAA4C,kBAA5C;AAEA;;AACA,OAAOC,aAAP,MAA0B,6CAA1B;AACA,OAAOC,OAAP,MAAoB,iCAApB;AACA,SAASC,SAAT,EAAoBC,OAApB,QAAmC,4BAAnC;AACA,SAASC,WAAT,EAAsBC,eAAtB,QAA6C,oBAA7C;AAEA;;AACA,SACEC,cADF,EAEEC,mBAFF,QAGO,mCAHP;AAKA;;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,MAAMC,WAAW,GAAIC,KAAD,IAAW;AAC7B;AACA,QAAM;AAAEJ,IAAAA,cAAF;AAAkBC,IAAAA,mBAAlB;AAAuCI,IAAAA;AAAvC,MAA+DD,KAArE;AACA,QAAME,MAAM,GAAGb,WAAW,GAAGa,MAA7B;AACA,QAAMC,IAAI,GAAG,IAAIC,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,MAAhC,CAAb;AACA,QAAMC,IAAI,GAAG,IAAIF,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,MAAhC,CAAb;AACA,QAAME,MAAM,GAAG,IAAIH,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,QAAhC,CAAf;AACA,QAAMG,WAAW,GAAG,IAAIJ,eAAJ,CAAoBF,MAApB,EAA4BG,GAA5B,CAAgC,aAAhC,CAApB;AACA,QAAM,CAACI,UAAD,EAAaC,aAAb,IAA8BzB,QAAQ,CAAC;AAC3CkB,IAAAA,IAAI,EAAEA,IAAI,GAAGQ,QAAQ,CAACR,IAAD,CAAX,GAAoB,CADa;AAE3CS,IAAAA,OAAO,EAAE;AAFkC,GAAD,CAA5C;AAIA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAACqB,IAAI,GAAGA,IAAH,GAAU,EAAf,CAApC;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0B/B,QAAQ,CAAC,CAAC,KAAD,EAAQ,EAAR,CAAD,CAAxC;AACA,QAAM,CAACgC,aAAD,EAAgBC,iBAAhB,IAAqCjC,QAAQ,CACjDsB,MAAM,GAAGY,IAAI,CAACC,KAAL,CAAWb,MAAX,CAAH,GAAwB,EADmB,CAAnD;AAGA,QAAM,CAACc,kBAAD,EAAqBC,sBAArB,IAA+CrC,QAAQ,CAC3DuB,WAAW,GAAGW,IAAI,CAACC,KAAL,CAAWZ,WAAX,CAAH,GAA6B,EADmB,CAA7D;AAGA,QAAM,CAACe,YAAD,EAAeC,eAAf,IAAkCvC,QAAQ,CAAC,EAAD,CAAhD;AAEA;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIyC,QAAQ,GAAG3B,WAAW,EAA1B;AACA0B,IAAAA,eAAe,CAACC,QAAD,CAAf;;AACA,QAAI,CAACzB,KAAK,CAAC0B,SAAX,EAAsB;AACpB9B,MAAAA,cAAc,CAAC;AACb+B,QAAAA,gBAAgB,EAAE3B,KAAK,CAAC2B,gBADX;AAEbxB,QAAAA,IAAI,EAAEM,UAAU,CAACN,IAFJ;AAGbS,QAAAA,OAAO,EAAEH,UAAU,CAACG,OAHP;AAIbgB,QAAAA,QAAQ,EAAEf,MAJG;AAKbI,QAAAA,aAAa,EAAEA,aALF;AAMbI,QAAAA,kBAAkB,EAAEA,kBANP;AAObE,QAAAA,YAAY,EAAEE;AAPD,OAAD,CAAd;AASD,KAVD,MAUO;AACL7B,MAAAA,cAAc,CAAC;AACbO,QAAAA,IAAI,EAAEM,UAAU,CAACN,IADJ;AAEbS,QAAAA,OAAO,EAAEH,UAAU,CAACG,OAFP;AAGbiB,QAAAA,YAAY,EAAE7B,KAAK,CAAC6B,YAHP;AAIbZ,QAAAA,aAAa,EAAE,EAJF;AAKbI,QAAAA,kBAAkB,EAAE,EALP;AAMbE,QAAAA,YAAY,EAAEE;AAND,OAAD,CAAd;AAQD;AACF,GAvBQ,EAuBN,CACDhB,UADC,EAEDI,MAFC,EAGDI,aAHC,EAIDI,kBAJC,EAKDrB,KAAK,CAAC6B,YALL,CAvBM,CAAT;AA+BA7C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI8C,GAAG,GAAG,EAAV;;AACA,QAAI9B,KAAK,CAAC0B,SAAV,EAAqB;AACnBI,MAAAA,GAAG,GAAI,WAAU9B,KAAK,CAAC6B,YAAa,SAAQpB,UAAU,CAACN,IAAK,EAA5D;AACD,KAFD,MAEO;AACL2B,MAAAA,GAAG,GAAI,SAAQ9B,KAAK,CAAC2B,gBAAiB,SAAQlB,UAAU,CAACN,IAAK,EAA9D;AACD;;AACD,QAAIU,MAAJ,EACEiB,GAAG,GAAI,SAAQ9B,KAAK,CAAC2B,gBAAiB,SAAQlB,UAAU,CAACN,IAAK,SAAQU,MAAO,EAA7E;AAEF,UAAMkB,kBAAkB,GAAGC,MAAM,CAACC,IAAP,CAAYhB,aAAZ,CAA3B;;AACA,QAAIc,kBAAkB,CAACG,MAAnB,GAA4B,CAAhC,EAAmC;AACjCJ,MAAAA,GAAG,GAAI,GAAEA,GAAI,WAAUX,IAAI,CAACgB,SAAL,CAAelB,aAAf,CAA8B,EAArD;AACD;;AAED,UAAMmB,uBAAuB,GAAGJ,MAAM,CAACC,IAAP,CAAYZ,kBAAZ,CAAhC;;AACA,QAAIe,uBAAuB,CAACF,MAAxB,GAAiC,CAArC,EAAwC;AACtCJ,MAAAA,GAAG,GAAI,GAAEA,GAAI,gBAAeX,IAAI,CAACgB,SAAL,CAAed,kBAAf,CAAmC,EAA/D;AACD;;AAEDL,IAAAA,WAAW,CAAC,CAAC,IAAD,EAAOc,GAAP,CAAD,CAAX;AACD,GArBQ,EAqBN,CAACrB,UAAD,EAAaI,MAAb,EAAqBI,aAArB,EAAoCI,kBAApC,CArBM,CAAT;AAuBA;;AACA,QAAMgB,UAAU,GAAIT,QAAD,IAAc;AAC/Bd,IAAAA,SAAS,CAACc,QAAD,CAAT;AACD,GAFD;;AAIA,QAAMU,YAAY,GAAG,CAACC,SAAD,EAAYC,YAAZ,EAA0BC,OAA1B,KAAsC;AACzD,QAAIC,MAAM,GAAGzB,aAAa,CAACsB,SAAD,CAA1B;AACA,QAAII,SAAS,GAAGD,MAAM,GAAGA,MAAM,CAACE,KAAP,CAAa,GAAb,CAAH,GAAuB,EAA7C;;AAEA,QAAIH,OAAJ,EAAa;AACXE,MAAAA,SAAS,CAACE,IAAV,CAAeL,YAAf;AACAtB,MAAAA,iBAAiB,CAAC,EAAE,GAAGD,aAAL;AAAoB,SAACsB,SAAD,GAAaI,SAAS,CAACG,IAAV,CAAe,GAAf;AAAjC,OAAD,CAAjB;AACD,KAHD,MAGO;AACLH,MAAAA,SAAS,GAAGA,SAAS,CAACpC,MAAV,CAAkBwC,EAAD,IAAQA,EAAE,KAAKP,YAAhC,CAAZ;AACA,UAAIG,SAAS,CAACT,MAAV,GAAmB,CAAvB,EACEhB,iBAAiB,CAAC,EAChB,GAAGD,aADa;AAEhB,SAACsB,SAAD,GAAaI,SAAS,CAACG,IAAV,CAAe,GAAf;AAFG,OAAD,CAAjB,CADF,KAKK;AACH,eAAO7B,aAAa,CAACsB,SAAD,CAApB;AACArB,QAAAA,iBAAiB,CAAC,EAAE,GAAGD;AAAL,SAAD,CAAjB;AACD;AACF;AACF,GAnBD;;AAqBA,QAAM+B,gBAAgB,GAAG,CAACT,SAAD,EAAYC,YAAZ,EAA0BC,OAA1B,KAAsC;AAC7D,QAAIC,MAAM,GAAGrB,kBAAkB,CAACkB,SAAD,CAA/B;AACA,QAAII,SAAS,GAAGD,MAAM,GAAGA,MAAM,CAACE,KAAP,CAAa,GAAb,CAAH,GAAuB,EAA7C;;AAEA,QAAIH,OAAJ,EAAa;AACXE,MAAAA,SAAS,CAACE,IAAV,CAAeL,YAAf;AACAlB,MAAAA,sBAAsB,CAAC,EACrB,GAAGD,kBADkB;AAErB,SAACkB,SAAD,GAAaI,SAAS,CAACG,IAAV,CAAe,GAAf;AAFQ,OAAD,CAAtB;AAID,KAND,MAMO;AACLH,MAAAA,SAAS,GAAGA,SAAS,CAACpC,MAAV,CAAkBwC,EAAD,IAAQA,EAAE,KAAKP,YAAhC,CAAZ;AACA,UAAIG,SAAS,CAACT,MAAV,GAAmB,CAAvB,EACEZ,sBAAsB,CAAC,EACrB,GAAGD,kBADkB;AAErB,SAACkB,SAAD,GAAaI,SAAS,CAACG,IAAV,CAAe,GAAf;AAFQ,OAAD,CAAtB,CADF,KAKK;AACH,eAAOzB,kBAAkB,CAACkB,SAAD,CAAzB;AACAjB,QAAAA,sBAAsB,CAAC,EAAE,GAAGD;AAAL,SAAD,CAAtB;AACD;AACF;AACF,GAtBD;;AAwBA,sBACE,0CACGN,QAAQ,CAAC,CAAD,CAAR,iBAAe,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAEA,QAAQ,CAAC,CAAD,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADlB,eAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACf,KAAK,CAAC0B,SAAP,iBACC,oBAAC,aAAD;AACE,IAAA,UAAU,EAAEW,UADd;AAEE,IAAA,YAAY,EAAEC,YAFhB;AAGE,IAAA,gBAAgB,EAAEU,gBAHpB;AAIE,IAAA,gBAAgB,EAAEhD,KAAK,CAAC2B,gBAJ1B;AAKE,IAAA,aAAa,EAAEV,aALjB;AAME,IAAA,kBAAkB,EAAEI,kBANtB;AAOE,IAAA,MAAM,EAAER,MAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAYGb,KAAK,CAAC6B,YAAN,iBACC;AAAI,IAAA,KAAK,EAAE;AAAEoB,MAAAA,SAAS,EAAE;AAAb,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACmBjD,KAAK,CAAC6B,YADzB,MAbJ,EAiBG5B,mBAAmB,CAACiD,IAApB,CAAyBhB,MAAzB,GAAkC,CAAlC,iBACC,oBAAC,IAAD;AACE,IAAA,QAAQ,EAAEjC,mBAAmB,CAACkD,QAApB,KAAiC,SAD7C;AAEE,IAAA,GAAG,EAAC,YAFN;AAGE,IAAA,IAAI,EAAC,OAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlD,mBAAmB,CAACiD,IAApB,CAAyBE,GAAzB,CAA8BC,OAAD,iBAC5B,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AACE,IAAA,OAAO,EAAEA,OADX;AAEE,IAAA,cAAc,EAAErD,KAAK,CAACsD,cAFxB;AAGE,IAAA,YAAY,EAAE/B,YAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,CADH,CALF,eAgBE;AACE,IAAA,KAAK,EAAE;AACLgC,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,cAAc,EAAE,QAFX;AAGLC,MAAAA,YAAY,EAAE;AAHT,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOE,oBAAC,UAAD;AACE,IAAA,OAAO,EAAEhD,UAAU,CAACN,IADtB;AAEE,IAAA,KAAK,EAAEF,mBAAmB,CAACyD,aAF7B;AAGE,IAAA,QAAQ,EAAEjD,UAAU,CAACG,OAHvB;AAIE,IAAA,QAAQ,EAAE,CAACT,IAAD,EAAOwD,QAAP,KACRjD,aAAa,CAAC,EAAE,GAAGD,UAAL;AAAiB,OAAC,MAAD,GAAUN;AAA3B,KAAD,CALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CAhBF,CAlBJ,EAqDGF,mBAAmB,CAACkD,QAApB,KAAiC,SAAjC,IACClD,mBAAmB,CAACiD,IAApB,CAAyBhB,MAAzB,KAAoC,CADrC,iBAEG;AACE,IAAA,KAAK,EAAE;AACLqB,MAAAA,OAAO,EAAE,MADJ;AAELK,MAAAA,aAAa,EAAE,QAFV;AAGLC,MAAAA,UAAU,EAAE,QAHP;AAILC,MAAAA,SAAS,EAAE,GAJN;AAKLN,MAAAA,cAAc,EAAE;AALX,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBATF,eAUE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbtC,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAI,MAAAA,sBAAsB,CAAC,EAAD,CAAtB;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eASE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CATF,CAVF,CAvDN,EAiFGrB,mBAAmB,CAACkD,QAApB,KAAiC,OAAjC,iBAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAjF/C,CADF,CAHF,CADF;AA2FD,CA1ND;;AA4NA,MAAMY,eAAe,GAAIC,KAAD,KAAY;AAClC/D,EAAAA,mBAAmB,EAAE+D,KAAK,CAACpE;AADO,CAAZ,CAAxB;;AAGA,MAAMqE,kBAAkB,GAAIC,QAAD,KAAe;AACxCtE,EAAAA,cAAc,EAAGuE,MAAD,IAAYD,QAAQ,CAACtE,cAAc,CAACuE,MAAD,CAAf,CADI;AAExCtE,EAAAA,mBAAmB,EAAE,MAAMqE,QAAQ,CAACrE,mBAAmB,EAApB;AAFK,CAAf,CAA3B;;AAKA,eAAeX,OAAO,CAAC6E,eAAD,EAAkBE,kBAAlB,CAAP,CAA6ClE,WAA7C,CAAf","sourcesContent":["import { Button, Pagination, Space, Spin } from \"antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\n\n/* custom components */\nimport FilterSection from \"../../component/FilterSection/FilterSection\";\nimport Product from \"../../component/Product/Product\";\nimport { GlobleBox, Wrapper } from \"../../component/Xcomponent\";\nimport { ProductsBox, ProductsWrapper } from \"./ProductListStyle\";\n\n/* actions */\nimport {\n  getProductList,\n  getProductListReset,\n} from \"../../action/getProductListAction\";\n\n/* other */\nimport { getCurrency } from \"../../utils\";\n\nconst ProductList = (props) => {\n  /* variables */\n  const { getProductList, getProductListReset, getProductListState } = props;\n  const search = useLocation().search;\n  const page = new URLSearchParams(search).get(\"page\");\n  const sort = new URLSearchParams(search).get(\"sort\");\n  const filter = new URLSearchParams(search).get(\"filter\");\n  const attr_filter = new URLSearchParams(search).get(\"attr_filter\");\n  const [pagination, setPagination] = useState({\n    page: page ? parseInt(page) : 1,\n    records: 20,\n  });\n  const [sortBy, setSortBy] = useState(sort ? sort : \"\");\n  const [redirect, setRedirect] = useState([false, \"\"]);\n  const [filter_params, set_filter_params] = useState(\n    filter ? JSON.parse(filter) : {}\n  );\n  const [attr_filter_params, set_attr_filter_params] = useState(\n    attr_filter ? JSON.parse(attr_filter) : {}\n  );\n  const [currencyType, setCurrencyType] = useState(\"\");\n\n  /* callbacks */\n  useEffect(() => {\n    let currency = getCurrency();\n    setCurrencyType(currency);\n    if (!props.forSearch) {\n      getProductList({\n        category_url_key: props.category_url_key,\n        page: pagination.page,\n        records: pagination.records,\n        sort_key: sortBy,\n        filter_params: filter_params,\n        attr_filter_params: attr_filter_params,\n        currencyType: currency,\n      });\n    } else {\n      getProductList({\n        page: pagination.page,\n        records: pagination.records,\n        search_query: props.search_query,\n        filter_params: {},\n        attr_filter_params: {},\n        currencyType: currency,\n      });\n    }\n  }, [\n    pagination,\n    sortBy,\n    filter_params,\n    attr_filter_params,\n    props.search_query,\n  ]);\n\n  useEffect(() => {\n    let url = \"\";\n    if (props.forSearch) {\n      url = `/search/${props.search_query}?page=${pagination.page}`;\n    } else {\n      url = `/shop/${props.category_url_key}?page=${pagination.page}`;\n    }\n    if (sortBy)\n      url = `/shop/${props.category_url_key}?page=${pagination.page}&sort=${sortBy}`;\n\n    const filter_params_keys = Object.keys(filter_params);\n    if (filter_params_keys.length > 0) {\n      url = `${url}&filter=${JSON.stringify(filter_params)}`;\n    }\n\n    const attr_filter_params_keys = Object.keys(attr_filter_params);\n    if (attr_filter_params_keys.length > 0) {\n      url = `${url}&attr_filter=${JSON.stringify(attr_filter_params)}`;\n    }\n\n    setRedirect([true, url]);\n  }, [pagination, sortBy, filter_params, attr_filter_params]);\n\n  /* functions */\n  const handleSort = (sort_key) => {\n    setSortBy(sort_key);\n  };\n\n  const handleFilter = (filter_by, filter_value, checked) => {\n    let values = filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_filter_params({ ...filter_params, [filter_by]: valuesArr.join(\",\") });\n    } else {\n      valuesArr = valuesArr.filter((el) => el !== filter_value);\n      if (valuesArr.length > 0)\n        set_filter_params({\n          ...filter_params,\n          [filter_by]: valuesArr.join(\",\"),\n        });\n      else {\n        delete filter_params[filter_by];\n        set_filter_params({ ...filter_params });\n      }\n    }\n  };\n\n  const handleAttrFilter = (filter_by, filter_value, checked) => {\n    let values = attr_filter_params[filter_by];\n    let valuesArr = values ? values.split(\",\") : [];\n\n    if (checked) {\n      valuesArr.push(filter_value);\n      set_attr_filter_params({\n        ...attr_filter_params,\n        [filter_by]: valuesArr.join(\",\"),\n      });\n    } else {\n      valuesArr = valuesArr.filter((el) => el !== filter_value);\n      if (valuesArr.length > 0)\n        set_attr_filter_params({\n          ...attr_filter_params,\n          [filter_by]: valuesArr.join(\",\"),\n        });\n      else {\n        delete attr_filter_params[filter_by];\n        set_attr_filter_params({ ...attr_filter_params });\n      }\n    }\n  };\n\n  return (\n    <>\n      {redirect[0] && <Redirect to={redirect[1]} />}\n\n      <GlobleBox>\n        <Wrapper>\n          {!props.forSearch && (\n            <FilterSection\n              handleSort={handleSort}\n              handleFilter={handleFilter}\n              handleAttrFilter={handleAttrFilter}\n              category_url_key={props.category_url_key}\n              filter_params={filter_params}\n              attr_filter_params={attr_filter_params}\n              sortBy={sortBy}\n            />\n          )}\n          {props.search_query && (\n            <h2 style={{ textAlign: \"center\" }}>\n              Search Result: '{props.search_query}'\n            </h2>\n          )}\n          {getProductListState.list.length > 0 && (\n            <Spin\n              spinning={getProductListState.apiState === \"loading\"}\n              tip=\"Loading...\"\n              size=\"large\"\n            >\n              <ProductsWrapper>\n                {getProductListState.list.map((product) => (\n                  <ProductsBox className=\"desktop\">\n                    <Product\n                      product={product}\n                      hideActionBtns={props.hideActionBtns}\n                      currencyType={currencyType}\n                    />\n                  </ProductsBox>\n                ))}\n              </ProductsWrapper>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  marginBottom: 64,\n                }}\n              >\n                <Pagination\n                  current={pagination.page}\n                  total={getProductListState.total_records}\n                  pageSize={pagination.records}\n                  onChange={(page, pageSize) =>\n                    setPagination({ ...pagination, [\"page\"]: page })\n                  }\n                />\n              </div>\n            </Spin>\n          )}\n\n          {getProductListState.apiState === \"success\" &&\n            getProductListState.list.length === 0 && (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                  minHeight: 300,\n                  justifyContent: \"center\",\n                }}\n              >\n                <h3>No Product Found.</h3>\n                <Space>\n                  <Button\n                    onClick={() => {\n                      set_filter_params({});\n                      set_attr_filter_params({});\n                    }}\n                  >\n                    Clear Filter\n                  </Button>\n                  <Link to=\"/\">\n                    <Button>Home</Button>\n                  </Link>\n                </Space>\n              </div>\n            )}\n\n          {getProductListState.apiState === \"error\" && <h1>Error</h1>}\n        </Wrapper>\n      </GlobleBox>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  getProductListState: state.getProductList,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  getProductList: (params) => dispatch(getProductList(params)),\n  getProductListReset: () => dispatch(getProductListReset()),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);\n"]},"metadata":{},"sourceType":"module"}